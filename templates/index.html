<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
        "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
  <script type="text/javascript"></script>
  <title>CoEx Browser</title>
  <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />

  <!-- jQuery -->
  <script src="https://code.jquery.com/jquery-2.2.4.min.js"   integrity="sha256-BbhdlvQf/xTY9gja0Dq3HiwQF8LaCRTXxZKRutelT44="   crossorigin="anonymous"></script>

  <!-- Bootstrap-->
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js"
  integrity="sha384-0mSbJDEHialfmuBBQP6A4Qrprq5OVfW37PRR3j5ELqxss1yVqOtnepnHVP9aJ7xS"
  crossorigin="anonymous"></script>
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css"
  integrity="sha384-1q8mTJOASx8j1Au+a5WDVnPi2lkFfwwEAa8hDDdjZlpLegxhjVME1fgjWPGmkzs7" crossorigin="anonymous">

  <!-- DataTables, found using their package builder -->
  <link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/u/bs/dt-1.10.12,b-1.2.1,b-html5-1.2.1,fh-3.1.2,sc-1.4.2,se-1.2.0/datatables.min.css"/>
  <script type="text/javascript" src="https://cdn.datatables.net/u/bs/dt-1.10.12,b-1.2.1,b-html5-1.2.1,fh-3.1.2,sc-1.4.2,se-1.2.0/datatables.min.js"></script>

  <!-- qTip2 -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/qtip2/3.0.3/jquery.qtip.min.css" integrity="sha256-JvdVmxv7Q0LsN1EJo2zc1rACwzatOzkyx11YI4aP9PY=" crossorigin="anonymous">
  <script src="https://cdn.jsdelivr.net/qtip2/3.0.3/jquery.qtip.min.js" integrity="sha256-a+PRq3NbyK3G08Boio9X6+yFiHpTSIrbE7uzZvqmDac=" crossorigin="anonymous"></script>
  
  <!-- Cytoscape and qTip2 extensions -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/cytoscape/2.6.12/cytoscape.min.js"></script>
  <script src="https://cdn.rawgit.com/cytoscape/cytoscape.js-qtip/2.4.0/cytoscape-qtip.js"></script>

  <!-- Loaf COB -->
  <script>
    var $SCRIPT_ROOT = (window.location.href).replace(/\/?$/, '/');
    $('<link/>', {
      rel: 'shortcut icon', 
      href: ($SCRIPT_ROOT + 'static/favicon.ico')
    }).appendTo('head');
    
    // Set some global variables for reference
    var CurrentOntology = "";
    var CurrentTerm = "";
    var CurrentNetwork = "";
    var cy = null;
    var logSpacingVal = true;
    var lastWindow = null;
    var lastFlank = null;
    
    // Load in the core scripts
    $(document).ready(function(){
      $.getScript(($SCRIPT_ROOT + 'static/js/cob.js'), function(){
        $.getScript(($SCRIPT_ROOT + 'static/js/polywas-layout.js'), function(){
          lastWindow = document.forms["graphOpts"]["windowSize"].value;
          lastFlank = document.forms["graphOpts"]["flankLimit"].value;
          tableMaker('Ontology');
        });
      });
    });
  </script>
  
  <style>
    #cob {
      float: left;
      width: 33%;
      height: 100%;
    }
    #cobHead{
      display: flex;
      justify-content: left;
      align-items: center;
      float: left;
      color: white;
      background-color: #337ab7;
      height: 70px;
      width: 100%;
      border-radius: 5px;
      font-size: 2.5em;
    }
    #cy {
      width: 67%;
      height: 100%;
      position: absolute;
      left: 33%;
      top: 0;
      z-index: 5;
    }
    #cyTitle{
      position: absolute;
      bottom: 0;
      color: DimGrey;
      z-index: 1;
      left: 33%;
      font-size: 1.75em;
    }
    #clearButton{
      position: absolute;
      margin: 3px;
      bottom: 0;
      right: 0;
      z-index: 10;
    }
    .OntologyTitle, .TermTitle, .NetworkTitle, .GeneTitle, .SubnetTitle {
      float: left;
      font-size: x-large;
    }
    .dataTables_info{
      float: left;
      margin: 3px;
      left: 0;
    }
    .dt-buttons{
      float: right;
      margin: 3px;
      right: 0;
    }
    table {
      background-color: white;
    }
  </style>
</head>

<!-- Actual Body -->
<body>
  
<!-- Cytoscape Wait Modal -->
<style></style>
<div class="modal fade" id="cyWait" tabindex="-1" role="dialog">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header"><h4 class="modal-title"><b>Please Wait For Layout</b></h4></div>
        <div class="modal-body" id="geneStatus">
          <div id="geneMsg">
            <p>We are now getting the node data and running the layout algorithm.</p>
            
            For bigger networks this can take up to 30 seconds so please be patient, 
            the page goes unresponsive while processing the layout, if you're just 
            updating the parameters, this will be much faster.
          </div>
        </div>
    </div>
  </div>
</div>

<!-- Selection Column -->
<div id='cob' class='container'>
  <div id='cobHead' class='container'>CoEx Browser</div>

<div>
  <!-- Tab List -->
  <ul class="nav nav-tabs" role="tablist" id="navTabs">
    <li role="presentation" class="active"><a href="#networks" aria-controls="networks" role="tab" data-toggle="tab">Network</a></li>
    <li role="presentation"><a aria-controls="opts" href="#opts" role="tab" data-toggle="tab">Options</a></li>
    <li role="presentation"><a aria-controls="genes" href="#genes" role="tab" data-toggle="tab">Genes</a></li>
    <li role="presentation"><a aria-controls="subnet" href="#subnet" role="tab" data-toggle="tab">Subnetwork</a></li>
  </ul>
  
  <!-- Section for all of the Tab Content -->
  <div class="tab-content">
    
    <!-- Network Selection Tab -->
    <div role="tabpanel" class="tab-pane active" id="networks">

    <!-- Section For Ontology Selection -->
      <br><div id="Ontology">
          <h5 id="OntologyWait" class="">We are gathering the datasets, please wait.</h5>
          <table class="table table-hover hidden" id="OntologyTable">
            <thead>
              <tr>
                <th>Ontology</th>
                <th>Description</th>
              </tr>
            </thead>
            <tbody></tbody>
          </table>
      </div>
      
      <!-- Section For Term Selection -->
      <br><div id="Term">
          <h5 id="TermWait">This table will appear once you select an attribute above.</h5>
          <table class="table table-hover hidden" id="TermTable">
            <thead>
              <tr>
                <th>Name</th>
                <th>Desc</th>
                <th>SNPs</th>
                <th>Genes</th>
              </tr>
            </thead>
            <tbody></tbody>
          </table>
      </div>
      
      <!-- Section For Network Selection -->
      <br><div id="Network">
        <h5 id="NetworkWait">This table will appear once you select an attribute above.</h5>
          <table class="table table-hover hidden" id="NetworkTable">
            <thead>
              <tr>
                <th>Network</th>
                <th>Description</th>
              </tr>
            </thead>
            <tbody></tbody>
          </table>
        </div>
      </div>
      <!-- End Network Selection Tab -->
      
      <!-- Parameter Adjustment Tab -->
      <div role="tabpanel" class="tab-pane" id="opts"><br>
        <form id="graphOpts">
          <div class="form-group">
            <label>Window Size</label>
            <input type="text" class="form-control" id="windowSize" value="50000" pattern="[0-9]+" size="7">
          </div>
          <div class="form-group">
            <label>Flank Limit</label>
            <input type="text" class="form-control" id="flankLimit" value="2" size="3" pattern="[0-9]+">
          </div>
          <div class="form-group">
            <label>Minimum Node Degree</label>
            <input type="text" class="form-control" id="nodeCutoff" value="1" size="2" pattern="[0-9]+">
          </div>
          <div class="form-group">
            <label>Minimum Edge Score</label>
            <input type="text" class="form-control" id="edgeCutoff" value="3.0" size="4" pattern="([0-9]+[0-9]|[3-9])\.*[0-9]*">
          </div>
          <div class="form-group">
            <label>Node Size</label>
            <input type="text" class="form-control" id="nodeSize" value="10" size="2" pattern="[0-9]+">
          </div>
          <div class="form-group">
            <label>SNP Colors</label>
            <input type="text" class="form-control" id="snpLevels" value="3" size="2" pattern="[1-4]+">
          </div>
          <div class="form-group">
            <button id="logSpacingButton" type="button" class="btn btn-default active" data-toggle="button" aria-pressed="true">Log Spacing</button>
          </div>
          <div class="form-group">
            <input type="button" class="btn btn-primary" id="updateButton" value="Update">
          </div>
        </form>
      </div>
      <!-- End Parameter Adjustment Tab -->
      
      <!-- Gene Table Tab -->
      <div role="tabpanel" class="tab-pane" id="genes"><br>
        <table class="table table-hover hidden" id="GeneTable"></table>
      </div>
      <!-- End Gene Table Tab -->
      
      <!-- Sub Network Table Tab -->
      <div role="tabpanel" class="tab-pane" id="subnet"><br>
        <table class="table table-hover hidden" id="SubnetTable"></table>
      </div>
      <!-- End Gene Table Tab -->
      
    </div>
  </div>
</div>

<!-- Box for Cytoscape Graph -->
<div id='cy'></div>

<!-- Box for title indicating current network -->
<div id='cyTitle'>Please select one option in each table to build a graph.</div>
<div id='clearButton'><input type="button" class="btn btn-danger" id="clearSelectionButton" value="Clear Selection"></div>
</body>
</html>
